// SPDX-License-Identifier: AGPL-3.0-only
pragma solidity ^0.8.10;

import "ds-test/test.sol";

import "contracts/interfaces/IAloeBlend.sol";

import "contracts/AloeBlend.sol";
import "contracts/Factory.sol";

contract FactoryTest is DSTest {
    bytes constant CREATION_CODE =
        hex"6102006040523480156200001257600080fd5b5060405162005cfb38038062005cfb83398101604081905262000035916200067a565b82836001600160a01b0316630dfe16816040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000075573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200009b9190620006ce565b6001600160a01b03166395d89b416040518163ffffffff1660e01b8152600401600060405180830381865afa158015620000d9573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526200010391908101906200073e565b846001600160a01b031663d21220a76040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000142573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620001689190620006ce565b6001600160a01b03166395d89b416040518163ffffffff1660e01b8152600401600060405180830381865afa158015620001a6573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052620001d091908101906200073e565b604051602001620001e3929190620007f6565b604051602081830303815290604052806040518060400160405280600a815260200169105313d14b509311539160b21b8152506012826000908051906020019062000230929190620005bb565b50815162000246906001906020850190620005bb565b5060ff81166080524660a0526200025c620004ba565b60c052505050506001600160a01b03811660e081905260408051630dfe168160e01b81529051630dfe1681916004808201926020929091908290030181865afa158015620002ae573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620002d49190620006ce565b6001600160a01b0316610100816001600160a01b031681525050806001600160a01b031663d21220a76040518163ffffffff1660e01b8152600401602060405180830381865afa1580156200032d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620003539190620006ce565b6001600160a01b0316610120816001600160a01b031681525050806001600160a01b031663d0c93a7c6040518163ffffffff1660e01b8152600401602060405180830381865afa158015620003ac573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620003d291906200084d565b60020b6101408160020b8152505050620003ff620d89e719610140516200055660201b62001f991760201c565b60020b610160526200042e62000419620d89e71962000872565b610140516200058b60201b62001fc81760201c565b60020b61018052604080516355b13a4f60e01b8152905133916355b13a4f9160048083019260209291908290030181865afa15801562000472573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620004989190620006ce565b6001600160a01b039081166101a0529182166101c052166101e05250620009b6565b60007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f6000604051620004ee9190620008e1565b6040805191829003822060208301939093528101919091527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc660608201524660808201523060a082015260c00160405160208183030381529060405280519060200120905090565b60008062000565838562000985565b905060008160020b1315620005805783038201905062000585565b830390505b92915050565b6000806200059a838562000985565b905060008160020b12620005b2578303905062000585565b90920303919050565b828054620005c990620008a4565b90600052602060002090601f016020900481019282620005ed576000855562000638565b82601f106200060857805160ff191683800117855562000638565b8280016001018555821562000638579182015b82811115620006385782518255916020019190600101906200061b565b50620006469291506200064a565b5090565b5b808211156200064657600081556001016200064b565b6001600160a01b03811681146200067757600080fd5b50565b6000806000606084860312156200069057600080fd5b83516200069d8162000661565b6020850151909350620006b08162000661565b6040850151909250620006c38162000661565b809150509250925092565b600060208284031215620006e157600080fd5b8151620006ee8162000661565b9392505050565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620007285781810151838201526020016200070e565b8381111562000738576000848401525b50505050565b6000602082840312156200075157600080fd5b81516001600160401b03808211156200076957600080fd5b818401915084601f8301126200077e57600080fd5b815181811115620007935762000793620006f5565b604051601f8201601f19908116603f01168101908382118183101715620007be57620007be620006f5565b81604052828152876020848701011115620007d857600080fd5b620007eb8360208301602088016200070b565b979650505050505050565b6a020b637b290213632b732160ad1b8152600083516200081e81600b8501602088016200070b565b602f60f81b600b9184019182015283516200084181600c8401602088016200070b565b01600c01949350505050565b6000602082840312156200086057600080fd5b81518060020b8114620006ee57600080fd5b60008160020b627fffff198114156200089b57634e487b7160e01b600052601160045260246000fd5b60000392915050565b600181811c90821680620008b957607f821691505b60208210811415620008db57634e487b7160e01b600052602260045260246000fd5b50919050565b600080835481600182811c915080831680620008fe57607f831692505b60208084108214156200091f57634e487b7160e01b86526022600452602486fd5b818015620009365760018114620009485762000977565b60ff1986168952848901965062000977565b60008a81526020902060005b868110156200096f5781548b82015290850190830162000954565b505084890196505b509498975050505050505050565b60008260020b80620009a757634e487b7160e01b600052601260045260246000fd5b808360020b0791505092915050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c0516101e05161516a62000b916000396000818161089b01528181610b04015281816111e60152818161163f015281816117fc015281816118cb0152818161243f01528181612823015281816128cc01528181612f0a01526132c201526000818161053b01528181610ad2015281816111b401528181611615015281816116a2015281816117820152818161234c01528181612a6001528181612b0901528181612ea601526132310152600081816104a90152612c31015260008181612e100152612e42015260008181612dbb0152612de6015260008181610bc101528181610c0601528181610c4d01528181610d1f01528181610d6401528181610dab01528181612d440152612d86015260008181610507015281816113eb01528181611b6101528181611d0c0152818161278f015261310501526000818161045d015281816113b601528181611b2d01528181611cd201528181612a13015261306f01526000818161066101528181610a0701528181611217015281816114f301528181611c95015281816120cc0152818161211e0152612bf2015260006114b901526000611484015260006103ed015261516a6000f3fe6080604052600436106102895760003560e01c8063819b71c811610153578063c3bd5945116100cb578063d5ffb4e51161007f578063da3848db11610064578063da3848db1461079b578063dd62ed3e14610851578063e035814d1461088957600080fd5b8063d5ffb4e51461076e578063d785598e1461078557600080fd5b8063d0c9bdb4116100b0578063d0c9bdb414610704578063d34879971461072e578063d505accf1461074e57600080fd5b8063c3bd5945146106d8578063c620033f146106ee57600080fd5b80639b14755811610122578063a9059cbb11610107578063a9059cbb146106a3578063a932492f146106c3578063ad1383f8146106c357600080fd5b80639b1475581461064f578063a41fe49f1461068357600080fd5b8063819b71c8146105e457806383db382d146105fa57806388a9f8bb1461062457806395d89b411461063a57600080fd5b806332e7c5bf116102015780635ee04d78116101b557806370a082311161019a57806370a082311461055d5780637ecebe001461058a5780637f86d13c146105b757600080fd5b80635ee04d78146104f557806362d7d45e1461052957600080fd5b8063443ec74d116101e6578063443ec74d1461044b57806355b13a4f146104975780635d7f850c146104cb57600080fd5b806332e7c5bf146104215780633644e5151461043657600080fd5b806321c28191116102585780632505c3d91161023d5780632505c3d91461036c57806330adf81f146103a7578063313ce567146103db57600080fd5b806321c281911461032a57806323b872dd1461034c57600080fd5b806306fdde0314610295578063095ea7b3146102c05780631304fd58146102f057806318160ddd1461031457600080fd5b3661029057005b600080fd5b3480156102a157600080fd5b506102aa6108bd565b6040516102b791906148fe565b60405180910390f35b3480156102cc57600080fd5b506102e06102db366004614949565b61094b565b60405190151581526020016102b7565b3480156102fc57600080fd5b5061030660095481565b6040519081526020016102b7565b34801561032057600080fd5b5061030660025481565b34801561033657600080fd5b5061034a610345366004614975565b6109b8565b005b34801561035857600080fd5b506102e0610367366004614992565b611022565b34801561037857600080fd5b5061038c6103873660046149d3565b611116565b604080519384526020840192909252908201526060016102b7565b3480156103b357600080fd5b506103067f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c981565b3480156103e757600080fd5b5061040f7f000000000000000000000000000000000000000000000000000000000000000081565b60405160ff90911681526020016102b7565b34801561042d57600080fd5b5061040f600281565b34801561044257600080fd5b50610306611480565b34801561045757600080fd5b5061047f7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016102b7565b3480156104a357600080fd5b5061047f7f000000000000000000000000000000000000000000000000000000000000000081565b3480156104d757600080fd5b506104e06114db565b604080519283526020830191909152016102b7565b34801561050157600080fd5b5061047f7f000000000000000000000000000000000000000000000000000000000000000081565b34801561053557600080fd5b5061047f7f000000000000000000000000000000000000000000000000000000000000000081565b34801561056957600080fd5b50610306610578366004614975565b60036020526000908152604090205481565b34801561059657600080fd5b506103066105a5366004614975565b60056020526000908152604090205481565b3480156105c357600080fd5b506103066105d2366004614975565b600b6020526000908152604090205481565b3480156105f057600080fd5b5061030660085481565b34801561060657600080fd5b5061061061019281565b60405162ffffff90911681526020016102b7565b34801561063057600080fd5b506103066101f481565b34801561064657600080fd5b506102aa611595565b34801561065b57600080fd5b5061047f7f000000000000000000000000000000000000000000000000000000000000000081565b34801561068f57600080fd5b506104e061069e366004614a05565b6115a2565b3480156106af57600080fd5b506102e06106be366004614949565b611bf4565b3480156106cf57600080fd5b5061040f600a81565b3480156106e457600080fd5b50610306600a5481565b3480156106fa57600080fd5b50610610616c5081565b34801561071057600080fd5b50610719611c6c565b60405163ffffffff90911681526020016102b7565b34801561073a57600080fd5b5061034a610749366004614a31565b611c8a565b34801561075a57600080fd5b5061034a610769366004614ac0565b611d39565b34801561077a57600080fd5b506106106201518081565b34801561079157600080fd5b5061030660075481565b3480156107a757600080fd5b5060065461080490600281810b9163010000008104820b9166010000000000008204810b916901000000000000000000810490910b9065ffffffffffff600160601b8204169060ff600160901b8204811691600160981b90041687565b60408051600298890b815296880b602088015294870b948601949094529190940b606084015265ffffffffffff909316608083015291151560a082015290151560c082015260e0016102b7565b34801561085d57600080fd5b5061030661086c366004614b31565b600460209081526000928352604080842090915290825290205481565b34801561089557600080fd5b5061047f7f000000000000000000000000000000000000000000000000000000000000000081565b600080546108ca90614b6a565b80601f01602080910402602001604051908101604052809291908181526020018280546108f690614b6a565b80156109435780601f1061091857610100808354040283529160200191610943565b820191906000526020600020905b81548152906001019060200180831161092657829003601f168201915b505050505081565b3360008181526004602090815260408083206001600160a01b038716808552925280832085905551919290917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925906109a69086815260200190565b60405180910390a35060015b92915050565b60005a90506000806000806109cb611ff4565b6006805460ff60981b1916600160981b1790556040805160608101825260008082526020820181905291810191909152939750919550935091507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316633850c7bd6040518163ffffffff1660e01b815260040160e060405180830381865afa158015610a63573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a879190614bc7565b5050505060029190910b6040840152506001600160a01b0316808252610ab29080600160601b61217c565b6001600160e01b031660208201526000610acb84612229565b9050610aff7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661224d565b610b317f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661224d565b6000806000610b4789898760000151600061228e565b92509250925080606001516001600160801b0316600014610b77576060810151610b729089906125ff565b505050505b6000610bab61271085610b9c86600160601b8b602001516001600160e01b031661217c565b610ba69088614c71565b61217c565b9050611324811015610d0b57610be586604001517f0000000000000000000000000000000000000000000000000000000000000000611fc8565b60020b60408a015260608201516001600160801b031615801590610c4157507f00000000000000000000000000000000000000000000000000000000000000008960400151610c349190614c89565b60020b896020015160020b145b15610c4b57600094505b7f00000000000000000000000000000000000000000000000000000000000000008960400151610c7b9190614c89565b60020b6020808b0191909152860151600090600190610ca99087906001600160e01b0316600160601b61217c565b610cb39086614cd1565b901c90508260200151811115610cca575060208201515b6000610cd461276b565b905081811015610cee57610ce9818303612805565b810191505b50610d03610cfc8b83612907565b8b9061292c565b505050610e8a565b6113ec811115610e5357610d4386604001517f0000000000000000000000000000000000000000000000000000000000000000611f99565b60020b60208a015260608201516001600160801b031615801590610d9f57507f00000000000000000000000000000000000000000000000000000000000000008960200151610d929190614ce8565b60020b896040015160020b145b15610da957600094505b7f00000000000000000000000000000000000000000000000000000000000000008960200151610dd99190614ce8565b60020b60408a01526020860151600090600190610e06908690600160601b906001600160e01b031661217c565b610e109087614cd1565b8451911c9150811115610e21575081515b6000610e2b6129ef565b905081811015610e4557610e40818303612a42565b810191505b50610d03610cfc8b83612b44565b60408051606081018252600080825260208201819052918101919091529850610e84868b846040015187878c612b69565b99504297505b610e968c868d8a612fb1565b6002546040805184815260208101929092528101869052606081018590529097507f802a0d65ee1ffb3e6af96deafe1fc3e6402b2672a2f4b79d1b23c4a06c998f349060800160405180910390a150506040805160e08101825260208a810151600281810b84529b840151808d0b83850152918b0151808d0b848601529a909301519a8b900b606083015265ffffffffffff989098166080820181905296151560a08201819052600060c0909201919091526006805462ffffff93841665ffffffffffff1990911617630100000099841699909902989098176bffffffffffff00000000000019166601000000000000998316999099026bffffff00000000000000000019169890981769010000000000000000009190991602979097177fffffffffffffffffffffffffff00000000000000ffffffffffffffffffffffff16600160601b9094027fffffffffffffffffffffffffff00ffffffffffffffffffffffffffffffffffff1693909317600160901b9095029490941760ff60981b1916909255505050505050565b6001600160a01b0383166000908152600460209081526040808320338452909152812054600019811461107e576110598382614cd1565b6001600160a01b03861660009081526004602090815260408083203384529091529020555b6001600160a01b038516600090815260036020526040812080548592906110a6908490614cd1565b90915550506001600160a01b03808516600081815260036020526040908190208054870190555190918716907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906111019087815260200190565b60405180910390a360019150505b9392505050565b600080808615158061112757508515155b6111785760405162461bcd60e51b815260206004820152600f60248201527f416c6f653a2030206465706f736974000000000000000000000000000000000060448201526064015b60405180910390fd5b600080611183611ff4565b50506006805460ff60981b1916600160981b17905590925090506111a6826133c4565b6111af816133c4565b6111e17f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661224d565b6112137f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661224d565b60007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316633850c7bd6040518163ffffffff1660e01b815260040160e060405180830381865afa158015611273573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906112979190614bc7565b50505050505090506000806112af858585600161228e565b50915091506112c460025483838f8f88613487565b91995097509550876113095760405162461bcd60e51b815260206004820152600e60248201526d416c6f653a20302073686172657360901b604482015260640161116f565b898710156113595760405162461bcd60e51b815260206004820152601560248201527f416c6f653a20616d6f756e743020746f6f206c6f770000000000000000000000604482015260640161116f565b888610156113a95760405162461bcd60e51b815260206004820152601560248201527f416c6f653a20616d6f756e743120746f6f206c6f770000000000000000000000604482015260640161116f565b6113de6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001633308a6135cd565b6114136001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163330896135cd565b61141d3389613650565b604080518981526020810189905290810187905233907f36af321ec8d3c75236829c5317affd40ddb308863a1236d2d277a4025cccee1e9060600160405180910390a250506006805460ff60981b19169055509398929750909550909350505050565b60007f000000000000000000000000000000000000000000000000000000000000000046146114b6576114b16136bc565b905090565b507f000000000000000000000000000000000000000000000000000000000000000090565b6000806000806114e9611ff4565b50509150915060007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316633850c7bd6040518163ffffffff1660e01b815260040160e060405180830381865afa15801561154f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115739190614bc7565b5050505050509050611588838383600061228e565b5090969095509350505050565b600180546108ca90614b6a565b600080846115e35760405162461bcd60e51b815260206004820152600e60248201526d416c6f653a20302073686172657360901b604482015260640161116f565b6000806115ee611ff4565b50506006805460ff60981b1916600160981b179055909250905061163a6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001661224d565b61166c7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661224d565b600254600080808061167c6129ef565b6007546040516370a0823160e01b81523060048201529095509092506001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016906370a0823190602401602060405180830381865afa1580156116e9573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061170d9190614d2f565b925083831161171d576000611733565b600a6117298585614cd1565b6117339190614d5e565b9350611754846117438585614c71565b61174d9190614cd1565b8d8761217c565b9850818911156117ce57816117698a86614c71565b6117739190614cd1565b91506117a86001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001683613756565b83600960008282546117ba9190614c71565b909155506117ca90508284614cd1565b6007555b6117d661276b565b6008546040516370a0823160e01b81523060048201529095509092506001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016906370a0823190602401602060405180830381865afa158015611843573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118679190614d2f565b925083831161187757600061188d565b600a6118838585614cd1565b61188d9190614d5e565b935061189d846117438585614c71565b97508188111561191757816118b28986614c71565b6118bc9190614cd1565b91506118f16001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001683613756565b83600a60008282546119039190614c71565b9091555061191390508284614cd1565b6008555b6000611922886137d0565b50505050905061194661193f826001600160801b03168f8961217c565b89906125ff565b9297509095509350915061195a858b614c71565b9950611966848a614c71565b9850611973600a84614d5e565b9450611980600a83614d5e565b935061199661198f8685614cd1565b8e8861217c565b6119a0908b614c71565b99506119af61198f8584614cd1565b6119b9908a614c71565b985084600960008282546119cd9190614c71565b9250508190555083600a60008282546119e69190614c71565b9250508190555050856040015160020b866020015160020b14611a80576000611a0e876137d0565b505050509050611a32611a2b826001600160801b03168f8961217c565b88906125ff565b92975090955093509150611a47838e8861217c565b611a519086614c71565b611a5b908b614c71565b9950611a68828e8861217c565b611a729085614c71565b611a7c908a614c71565b9850505b8a891015611ad05760405162461bcd60e51b815260206004820152601560248201527f416c6f653a20616d6f756e743020746f6f206c6f770000000000000000000000604482015260640161116f565b89881015611b205760405162461bcd60e51b815260206004820152601560248201527f416c6f653a20616d6f756e743120746f6f206c6f770000000000000000000000604482015260640161116f565b611b546001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016338b6138b8565b611b886001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016338a6138b8565b611b92338d6138e8565b604080518d8152602081018b905290810189905233907f02f25270a4d87bea75db541cdfe559334a275b4a233520ed6c0a2429667cca949060600160405180910390a250506006805460ff60981b191690555094989397509295505050505050565b33600090815260036020526040812080548391908390611c15908490614cd1565b90915550506001600160a01b038316600081815260036020526040908190208054850190555133907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906109a69086815260200190565b6006546000906114b190600160601b900465ffffffffffff16612229565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614611cbf57600080fd5b8315611cf957611cf96001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001633866138b8565b8215611d3357611d336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001633856138b8565b50505050565b42841015611d895760405162461bcd60e51b815260206004820152601760248201527f5045524d49545f444541444c494e455f45585049524544000000000000000000604482015260640161116f565b6000611d93611480565b6001600160a01b0389811660008181526005602090815260409182902080546001810190915582517f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c98184015280840194909452938c166060840152608083018b905260a083019390935260c08083018a90528151808403909101815260e08301909152805192019190912061190160f01b6101008301526101028201929092526101228101919091526101420160408051601f198184030181528282528051602091820120600080855291840180845281905260ff88169284019290925260608301869052608083018590529092509060019060a0016020604051602081039080840390855afa158015611eac573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b03811615801590611ee25750886001600160a01b0316816001600160a01b0316145b611f2e5760405162461bcd60e51b815260206004820152600e60248201527f494e56414c49445f5349474e4552000000000000000000000000000000000000604482015260640161116f565b6001600160a01b0390811660009081526004602090815260408083208b8516808552908352928190208a905551898152919350918a16917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a350505050505050565b600080611fa68385614d72565b905060008160020b1315611fbf578303820190506109b2565b90920392915050565b600080611fd58385614d72565b905060008160020b12611feb57830390506109b2565b90920303919050565b604080516060810182526000808252602082018190529181019190915260408051606081018252600080825260208201819052918101919091526040805160e081018252600654600281810b835263010000008204810b602084015266010000000000008204810b938301939093526901000000000000000000810490920b606082015265ffffffffffff600160601b830416608082015260ff600160901b83048116151560a0830152600160981b90920490911615801560c083015260009182916120bf57600080fd5b60405180606001604052807f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602001826000015160020b8152602001826020015160020b81525060405180606001604052807f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602001836040015160020b8152602001836060015160020b81525082608001518360a0015194509450945094505090919293565b60008161218857600080fd5b60008060001985870985870292508281108382030391505080600014156121b45750829004905061110f565b8381106121c057600080fd5b60008486880960026001871981018816978890046003810283188082028403028082028403028082028403028082028403028082028403029081029092039091026000889003889004909101858311909403939093029303949094049190911702949350505050565b60006109b2620186a061224465ffffffffffff851642614cd1565b6201518061217c565b6040805160048152602481019091526020810180516001600160e01b0316630302f06b60e31b17905261228a906001600160a01b0383169061395c565b5050565b60408051608081018252600080825260208201819052918101829052606081018290528190600080876040015160020b886020015160020b14612331576122d4886137d0565b6001600160801b0394851660608901819052918516965090931693506122ff928b92508a9150613981565b602085015280845282908490612316908390614c71565b90525060208301805182919061232d908390614c71565b9052505b6007546040516370a0823160e01b81523060048201529092507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa15801561239b573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906123bf9190614d2f565b90508181116123cf5760006123e5565b600a6123db8383614cd1565b6123e59190614d5e565b9150856123f257816123f5565b60005b816123fe6129ef565b6124089190614c71565b6124129190614cd1565b83518490612421908390614c71565b9052506008546040516370a0823160e01b81523060048201529092507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa15801561248e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906124b29190614d2f565b90508181116124c25760006124d8565b600a6124ce8383614cd1565b6124d89190614d5e565b9150856124e557816124e8565b60005b816124f161276b565b6124fb9190614c71565b6125059190614cd1565b836020018181516125169190614c71565b905250604089015160208a0151600291820b910b146125e657612538896137d0565b6001600160801b039485166040890181905291851696509093169350612563928c92508a9150613981565b90955093508561257d57612578600a83614d5e565b612580565b60005b835161258d908490614c71565b6125979190614cd1565b6125a19086614c71565b9450856125b8576125b3600a82614d5e565b6125bb565b60005b8184602001516125cb9190614c71565b6125d59190614cd1565b6125df9085614c71565b93506125f3565b8251602084015190955093505b50509450945094915050565b60008080806001600160801b038516156126a95785516020870151604080890151905163a34123a760e01b8152600292830b6004820152910b60248201526001600160801b03871660448201526001600160a01b039091169063a34123a79060640160408051808303816000875af115801561267f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906126a39190614d94565b90945092505b8551602087015160408089015190516309e3d67b60e31b8152306004820152600292830b6024820152910b60448201526001600160801b0360648201819052608482015260009182916001600160a01b0390911690634f1eb3d89060a40160408051808303816000875af1158015612725573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906127499190614dcf565b96999598506001600160801b039081168a900397509095168790039450505050565b600a546040516370a0823160e01b8152306004820152600091906001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016906370a08231906024015b602060405180830381865afa1580156127d7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906127fb9190614d2f565b6114b19190614cd1565b6008546040516370a0823160e01b81523060048201526000919082907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa158015612872573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906128969190614d2f565b90508181116128a65760006128ad565b600a828203045b91508181038411156128bf5781810393505b6128f46001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016838601613756565b600a805483019055038290036008555090565b600061110f61291984602001516139b4565b61292685604001516139b4565b84613d07565b6000806001600160801b038316156129e857835160208501516040808701519051633c8a7d8d60e01b8152306004820152600292830b6024820152910b60448201526001600160801b038516606482015260a06084820152600060a48201526001600160a01b0390911690633c8a7d8d9060c40160408051808303816000875af11580156129be573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906129e29190614d94565b90925090505b9250929050565b6009546040516370a0823160e01b8152306004820152600091906001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016906370a08231906024016127ba565b6007546040516370a0823160e01b81523060048201526000919082907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa158015612aaf573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612ad39190614d2f565b9050818111612ae3576000612aea565b600a828203045b9150818103841115612afc5781810393505b612b316001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016838601613756565b6009805483019055038290036007555090565b600061110f612b5684602001516139b4565b612b6385604001516139b4565b84613d50565b604080516060810182526000808252602082018190529181018290529080612b9188886125ff565b935093505050600a60ff168281612baa57612baa614d48565b60098054929091049091019055600a805491819004909101905550600082612bd457616c50612ca3565b87516040808a015190516326fbd52f60e01b81526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000081166004830152928316602482015260029190910b6044820152612ca3917f000000000000000000000000000000000000000000000000000000000000000016906326fbd52f906064016020604051808303816000875af1158015612c7a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612c9e9190614d2f565b613db0565b60011c627fffff169050600080612cbb878785613e35565b9250925050600080612cd2896101f461271061217c565b612cda6129ef565b039150612cec886101f461271061217c565b612cf461276b565b03905083821215612d135760009850612d0e828503612a42565b820193505b82811215612d2f5760009750612d2a818403612805565b810192505b612d68858d60400151612d429190614c89565b7f0000000000000000000000000000000000000000000000000000000000000000611fc8565b60020b60208c015260408c0151612daa90612d84908790614ce8565b7f0000000000000000000000000000000000000000000000000000000000000000611f99565b600290810b60408d015260208c01517f0000000000000000000000000000000000000000000000000000000000000000820b910b1215612e0e577f000000000000000000000000000000000000000000000000000000000000000060020b60208c01525b7f000000000000000000000000000000000000000000000000000000000000000060020b8b6040015160020b1315612e6a577f000000000000000000000000000000000000000000000000000000000000000060020b60408c01525b8b51612e8490612e7d908d908787613eaa565b8c9061292c565b90945092508815612eed57612ecc612e9c8584614cd1565b6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690613ed1565b612ed68483614cd1565b60076000828254612ee79190614c71565b90915550505b8715612f5157612f30612f008483614cd1565b6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690613ed1565b612f3a8382614cd1565b60086000828254612f4b9190614c71565b90915550505b7fe73e1a034909b10f2cbe101ce0618d683b1485c1c2da61474bdbebce08bcaf1a8b602001518c60400151604051612f99929190600292830b8152910b602082015260400190565b60405180910390a150989a9950505050505050505050565b60006001600160a01b03851661300d57604080516000808252602082015263ffffffff86168183015290517faf945aff5cea2d4d4f891882674c81bcdaeb15609c6d7bc80875dbc4ee83e4ee9181900360600190a150806133bc565b6001600160a01b0385166000908152600b60205260409020545a61303385615208614e02565b63ffffffff166130439190614cd1565b9350600061306b61305a63ffffffff871684614e2a565b8763ffffffff16633b9aca0061217c565b90507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316876001600160a01b0316141561310357600954808211806130b6575082155b156130bf578091505b6130c98282614cd1565b905060006130e46130db600a86614e2a565b4561271061217c565b90508082119550856130f657816130f8565b805b600955506133389050565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316876001600160a01b0316141561319057600a548082118061314c575082155b15613155578091505b61315f8282614cd1565b905060006131716130db600a86614e2a565b90508082119550856131835781613185565b805b600a55506133389050565b6040516370a0823160e01b81523060048201526000906001600160a01b038916906370a0823190602401602060405180830381865afa1580156131d7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906131fb9190614d2f565b905080821180613209575082155b15613212578091505b60405163026c7dfb60e31b81526001600160a01b0389811660048301527f00000000000000000000000000000000000000000000000000000000000000001690631363efd890602401602060405180830381865afa158015613278573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061329c9190614e49565b801561332d575060405163026c7dfb60e31b81526001600160a01b0389811660048301527f00000000000000000000000000000000000000000000000000000000000000001690631363efd890602401602060405180830381865afa158015613309573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061332d9190614e49565b61333657600080fd5b505b61334c6001600160a01b03881633836138b8565b61336887613363612710848963ffffffff1661217c565b613ef0565b604080516001600160a01b03891681526020810183905263ffffffff88168183015290517faf945aff5cea2d4d4f891882674c81bcdaeb15609c6d7bc80875dbc4ee83e4ee9181900360600190a183925050505b949350505050565b806040015160020b816020015160020b14156133dd5750565b60006133e8826137d0565b505050509050806001600160801b031660001461228a5781516020830151604080850151905163a34123a760e01b8152600292830b6004820152910b6024820152600060448201526001600160a01b039091169063a34123a79060640160408051808303816000875af1158015613463573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d339190614d94565b6000808088158061349757508715155b806134a157508615155b6134ad576134ad614e64565b886135225760006134cc6001600160a01b03861680600160601b61217c565b90506134e686600160601b836001600160e01b031661217c565b9250868310156134fb5785915081935061351c565b86925061351683826001600160e01b0316600160601b61217c565b91508293505b506135c1565b8761353b575083613534818a8961217c565b92506135c1565b8661354e57859150613534828a8a61217c565b60008789106135695761356287898b61217c565b8610613577565b86613575878b8b61217c565b105b905080156135a15785915061358d828a8a61217c565b925061359a828b8a61217c565b93506135bf565b8692506135af83898b61217c565b91506135bc838b8b61217c565b93505b505b96509650969350505050565b6040516001600160a01b0380851660248301528316604482015260648101829052611d339085906323b872dd60e01b906084015b60408051601f198184030181529190526020810180516001600160e01b03167fffffffff0000000000000000000000000000000000000000000000000000000090931692909217909152613fa7565b80600260008282546136629190614c71565b90915550506001600160a01b0382166000818152600360209081526040808320805486019055518481527fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef91015b60405180910390a35050565b60007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60006040516136ee9190614e7a565b6040805191829003822060208301939093528101919091527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc660608201524660808201523060a082015260c00160405160208183030381529060405280519060200120905090565b604051602481018290526137cb90632e1a7d4d60e01b906044015b60408051601f198184030181529190526020810180516001600160e01b03167fffffffff00000000000000000000000000000000000000000000000000000000909316929092179091526001600160a01b0384169061395c565b505050565b600080600080600085600001516001600160a01b031663514ea4bf30886020015189604001516040516020016138319392919060609390931b6bffffffffffffffffffffffff1916835260e891821b6014840152901b6017820152601a0190565b604051602081830303815290604052805190602001206040518263ffffffff1660e01b815260040161386591815260200190565b60a060405180830381865afa158015613882573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906138a69190614f16565b939a9299509097509550909350915050565b6040516001600160a01b0383166024820152604481018290526137cb90849063a9059cbb60e01b90606401613601565b6001600160a01b03821660009081526003602052604081208054839290613910908490614cd1565b90915550506002805482900390556040518181526000906001600160a01b038416907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906020016136b0565b606061110f838360405180606001604052806027815260200161510e6027913961408c565b6000806139a88461399587602001516139b4565b6139a288604001516139b4565b86614177565b91509150935093915050565b60008060008360020b126139cb578260020b6139d8565b8260020b6139d890614f6d565b90506139e7620d89e719614f8a565b62ffffff16811115613a1f5760405162461bcd60e51b81526020600482015260016024820152601560fa1b604482015260640161116f565b600060018216613a4057700100000000000000000000000000000000613a52565b6ffffcb933bd6fad37aa2d162d1a5940015b70ffffffffffffffffffffffffffffffffff1690506002821615613a86576ffff97272373d413259a46990580e213a0260801c5b6004821615613aa5576ffff2e50f5f656932ef12357cf3c7fdcc0260801c5b6008821615613ac4576fffe5caca7e10e4e61c3624eaa0941cd00260801c5b6010821615613ae3576fffcb9843d60f6159c9db58835c9266440260801c5b6020821615613b02576fff973b41fa98c081472e6896dfb254c00260801c5b6040821615613b21576fff2ea16466c96a3843ec78b326b528610260801c5b6080821615613b40576ffe5dee046a99a2a811c461f1969c30530260801c5b610100821615613b60576ffcbe86c7900a88aedcffc83b479aa3a40260801c5b610200821615613b80576ff987a7253ac413176f2b074cf7815e540260801c5b610400821615613ba0576ff3392b0822b70005940c7a398e4b70f30260801c5b610800821615613bc0576fe7159475a2c29b7443b29c7fa6e889d90260801c5b611000821615613be0576fd097f3bdfd2022b8845ad8f792aa58250260801c5b612000821615613c00576fa9f746462d870fdf8a65dc1f90e061e50260801c5b614000821615613c20576f70d869a156d2a1b890bb3df62baf32f70260801c5b618000821615613c40576f31be135f97d08fd981231505542fcfa60260801c5b62010000821615613c61576f09aa508b5b7a84e1c677de54f3e99bc90260801c5b62020000821615613c81576e5d6af8dedb81196699c329225ee6040260801c5b62040000821615613ca0576d2216e584f5fa1ea926041bedfe980260801c5b62080000821615613cbd576b048a170391f7dc42444e8fa20260801c5b60008460020b1315613cde578060001981613cda57613cda614d48565b0490505b640100000000810615613cf2576001613cf5565b60005b60ff16602082901c0192505050919050565b6000826001600160a01b0316846001600160a01b03161115613d27579192915b6133bc613d4b83600160601b613d3d8888614fad565b6001600160a01b031661217c565b614259565b6000826001600160a01b0316846001600160a01b03161115613d70579192915b6000613d93856001600160a01b0316856001600160a01b0316600160601b61217c565b9050613da7613d4b8483613d3d8989614fad565b95945050505050565b60006623b2bbf39305008211613dc95750610192919050565b67061f6351eb7df8008210613de15750616c50919050565b613dec600283614e2a565b9150600082670de0b6b3a76400000383670de0b6b3a764000001600160601b0281613e1957613e19614d48565b0490506001613e2782614274565b62ffffff16901c9392505050565b60008080613e4a613e4585614f8a565b6139b4565b613e61906001600160a01b0316600160601b614cd1565b9250613e8086846bffffffffffffffffffffffff16600160601b61217c565b9150613e9f85846bffffffffffffffffffffffff16600160601b61217c565b905093509350939050565b6000613da784613ebd87602001516139b4565b613eca88604001516139b4565b86866145bb565b604051602481018290526137cb9063b6b55f2560e01b90604401613771565b6001600160a01b0382166000908152600c60209081526040808320600d9092529091205460ff16600e83049250818160ff16600e8110613f3257613f32614fd5565b01546001600160a01b0385166000908152600b6020526040902080548501919091039055828260ff8316600e8110613f6c57613f6c614fd5565b0155600e60ff60018301166001600160a01b03959095166000908152600d60205260409020805460ff19169190950660ff1617909355505050565b6000613ffc826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166146739092919063ffffffff16565b8051909150156137cb578080602001905181019061401a9190614e49565b6137cb5760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e60448201527f6f74207375636365656400000000000000000000000000000000000000000000606482015260840161116f565b6060833b6141025760405162461bcd60e51b815260206004820152602660248201527f416464726573733a2064656c65676174652063616c6c20746f206e6f6e2d636f60448201527f6e74726163740000000000000000000000000000000000000000000000000000606482015260840161116f565b600080856001600160a01b03168560405161411d9190614feb565b600060405180830381855af49150503d8060008114614158576040519150601f19603f3d011682016040523d82523d6000602084013e61415d565b606091505b509150915061416d828286614682565b9695505050505050565b600080836001600160a01b0316856001600160a01b03161115614198579293925b846001600160a01b0316866001600160a01b0316116141cc576141bc8585856146bb565b6001600160e01b03169150614250565b836001600160a01b0316866001600160a01b03161015614228576141f18685856146bb565b6001600160e01b03169150614207858785614749565b77ffffffffffffffffffffffffffffffffffffffffffffffff169050614250565b614233858585614749565b77ffffffffffffffffffffffffffffffffffffffffffffffff1690505b94509492505050565b806001600160801b038116811461426f57600080fd5b919050565b60006401000276a36001600160a01b038316108015906142b0575073fffd8963efd1fc6a506488495d951d5263988d266001600160a01b038316105b6142e05760405162461bcd60e51b81526020600482015260016024820152602960f91b604482015260640161116f565b77ffffffffffffffffffffffffffffffffffffffff00000000602083901b166001600160801b03811160071b81811c67ffffffffffffffff811160061b90811c63ffffffff811160051b90811c61ffff811160041b90811c60ff8111600390811b91821c600f811160021b90811c918211600190811b92831c979088119617909417909217179091171717608081106143885761437e607f82614cd1565b83901c9150614399565b61439381607f614cd1565b83901b91505b600060406143a8608084615007565b901b9050828302607f1c92508260801c80603f1b8217915083811c935050828302607f1c92508260801c80603e1b8217915083811c935050828302607f1c92508260801c80603d1b8217915083811c935050828302607f1c92508260801c80603c1b8217915083811c935050828302607f1c92508260801c80603b1b8217915083811c935050828302607f1c92508260801c80603a1b8217915083811c935050828302607f1c92508260801c8060391b8217915083811c935050828302607f1c92508260801c8060381b8217915083811c935050828302607f1c92508260801c8060371b8217915083811c935050828302607f1c92508260801c8060361b8217915083811c935050828302607f1c92508260801c8060351b8217915083811c935050828302607f1c92508260801c8060341b8217915083811c935050828302607f1c92508260801c8060331b8217915083811c935050828302607f1c92508260801c8060321b8217915050600081693627a301d71055774c8561452b9190615046565b90506000608061454b6f028f6481ab7f045a5af012a19d003aaa84615007565b901d90506000608061456d846fdb2df09e81959a81455e260799a0632f6150cd565b901d90508060020b8260020b146145ac57886001600160a01b0316614591826139b4565b6001600160a01b031611156145a657816145ae565b806145ae565b815b9998505050505050505050565b6000836001600160a01b0316856001600160a01b031611156145db579293925b846001600160a01b0316866001600160a01b031611614606576145ff858585613d50565b9050613da7565b836001600160a01b0316866001600160a01b0316101561466857600061462d878686613d50565b9050600061463c878986613d07565b9050806001600160801b0316826001600160801b03161061465d578061465f565b815b92505050613da7565b61416d858584613d07565b60606133bc8484600085614793565b6060831561469157508161110f565b8251156146a15782518084602001fd5b8160405162461bcd60e51b815260040161116f91906148fe565b6000826001600160a01b0316846001600160a01b031611156146db579192915b6001600160a01b03841661472d7bffffffffffffffffffffffffffffffff000000000000000000000000606085901b166147158787614fad565b6001600160a01b0316866001600160a01b031661217c565b6147379190614d5e565b67ffffffffffffffff16949350505050565b6000826001600160a01b0316846001600160a01b03161115614769579192915b6133bc6001600160801b0383166147808686614fad565b6001600160a01b0316600160601b61217c565b60608247101561480b5760405162461bcd60e51b815260206004820152602660248201527f416464726573733a20696e73756666696369656e742062616c616e636520666f60448201527f722063616c6c0000000000000000000000000000000000000000000000000000606482015260840161116f565b843b6148595760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161116f565b600080866001600160a01b031685876040516148759190614feb565b60006040518083038185875af1925050503d80600081146148b2576040519150601f19603f3d011682016040523d82523d6000602084013e6148b7565b606091505b50915091506148c7828286614682565b979650505050505050565b60005b838110156148ed5781810151838201526020016148d5565b83811115611d335750506000910152565b602081526000825180602084015261491d8160408501602087016148d2565b601f01601f19169190910160400192915050565b6001600160a01b038116811461494657600080fd5b50565b6000806040838503121561495c57600080fd5b823561496781614931565b946020939093013593505050565b60006020828403121561498757600080fd5b813561110f81614931565b6000806000606084860312156149a757600080fd5b83356149b281614931565b925060208401356149c281614931565b929592945050506040919091013590565b600080600080608085870312156149e957600080fd5b5050823594602084013594506040840135936060013592509050565b600080600060608486031215614a1a57600080fd5b505081359360208301359350604090920135919050565b60008060008060608587031215614a4757600080fd5b8435935060208501359250604085013567ffffffffffffffff80821115614a6d57600080fd5b818701915087601f830112614a8157600080fd5b813581811115614a9057600080fd5b886020828501011115614aa257600080fd5b95989497505060200194505050565b60ff8116811461494657600080fd5b600080600080600080600060e0888a031215614adb57600080fd5b8735614ae681614931565b96506020880135614af681614931565b955060408801359450606088013593506080880135614b1481614ab1565b9699959850939692959460a0840135945060c09093013592915050565b60008060408385031215614b4457600080fd5b8235614b4f81614931565b91506020830135614b5f81614931565b809150509250929050565b600181811c90821680614b7e57607f821691505b60208210811415614b9f57634e487b7160e01b600052602260045260246000fd5b50919050565b805161ffff8116811461426f57600080fd5b8051801515811461426f57600080fd5b600080600080600080600060e0888a031215614be257600080fd5b8751614bed81614931565b8097505060208801518060020b8114614c0557600080fd5b9550614c1360408901614ba5565b9450614c2160608901614ba5565b9350614c2f60808901614ba5565b925060a0880151614c3f81614ab1565b9150614c4d60c08901614bb7565b905092959891949750929550565b634e487b7160e01b600052601160045260246000fd5b60008219821115614c8457614c84614c5b565b500190565b60008160020b8360020b6000811281627fffff1901831281151615614cb057614cb0614c5b565b81627fffff018313811615614cc757614cc7614c5b565b5090039392505050565b600082821015614ce357614ce3614c5b565b500390565b60008160020b8360020b6000821282627fffff03821381151615614d0e57614d0e614c5b565b82627fffff19038212811615614d2657614d26614c5b565b50019392505050565b600060208284031215614d4157600080fd5b5051919050565b634e487b7160e01b600052601260045260246000fd5b600082614d6d57614d6d614d48565b500490565b60008260020b80614d8557614d85614d48565b808360020b0791505092915050565b60008060408385031215614da757600080fd5b505080516020909101519092909150565b80516001600160801b038116811461426f57600080fd5b60008060408385031215614de257600080fd5b614deb83614db8565b9150614df960208401614db8565b90509250929050565b600063ffffffff808316818516808303821115614e2157614e21614c5b565b01949350505050565b6000816000190483118215151615614e4457614e44614c5b565b500290565b600060208284031215614e5b57600080fd5b61110f82614bb7565b634e487b7160e01b600052600160045260246000fd5b600080835481600182811c915080831680614e9657607f831692505b6020808410821415614eb657634e487b7160e01b86526022600452602486fd5b818015614eca5760018114614edb57614f08565b60ff19861689528489019650614f08565b60008a81526020902060005b86811015614f005781548b820152908501908301614ee7565b505084890196505b509498975050505050505050565b600080600080600060a08688031215614f2e57600080fd5b614f3786614db8565b94506020860151935060408601519250614f5360608701614db8565b9150614f6160808701614db8565b90509295509295909350565b6000600160ff1b821415614f8357614f83614c5b565b5060000390565b60008160020b627fffff19811415614fa457614fa4614c5b565b60000392915050565b60006001600160a01b0383811690831681811015614fcd57614fcd614c5b565b039392505050565b634e487b7160e01b600052603260045260246000fd5b60008251614ffd8184602087016148d2565b9190910192915050565b60008083128015600160ff1b85018412161561502557615025614c5b565b836001600160ff1b0301831381161561504057615040614c5b565b50500390565b60006001600160ff1b0360008413600084138583048511828216161561506e5761506e614c5b565b600160ff1b600087128281168783058912161561508d5761508d614c5b565b600087129250878205871284841616156150a9576150a9614c5b565b878505871281841616156150bf576150bf614c5b565b505050929093029392505050565b6000808212826001600160ff1b03038413811516156150ee576150ee614c5b565b600160ff1b839003841281161561510757615107614c5b565b5050019056fe416464726573733a206c6f772d6c6576656c2064656c65676174652063616c6c206661696c6564a26469706673582212209314af4326b6900a68f8ab9d8641ea8b5a8efb3c95c04ec791a6769605d6e4dd64736f6c634300080a0033";

    Factory factory;

    function setUp() public {
        factory = new Factory(IVolatilityOracle(address(1)), CREATION_CODE);
    }

    function test_creationCode() public {
        assertEq(CREATION_CODE.length, type(AloeBlend).creationCode.length);
        assertEq(keccak256(CREATION_CODE), keccak256(type(AloeBlend).creationCode));
    }

    function test_createVault() public {
        IAloeBlend blend = factory.createVault(
            IUniswapV3Pool(0xF1B63cD9d80f922514c04b0fD0a30373316dd75b),
            ISilo(0x8E35ec3f2C8e14bf7A0E67eA6667F6965938aD2d),
            ISilo(0x908f6DF3df3c25365172F350670d055541Ec362E)
        );

        assertEq(address(blend.silo0()), 0x8E35ec3f2C8e14bf7A0E67eA6667F6965938aD2d);
        assertEq(address(blend.silo1()), 0x908f6DF3df3c25365172F350670d055541Ec362E);
        assertEq(blend.getRebalanceUrgency(), 1897606372);
    }

    function testFail_createSameVaultTwice() public {
        IAloeBlend blend = factory.createVault(
            IUniswapV3Pool(0xF1B63cD9d80f922514c04b0fD0a30373316dd75b),
            ISilo(0x8E35ec3f2C8e14bf7A0E67eA6667F6965938aD2d),
            ISilo(0x908f6DF3df3c25365172F350670d055541Ec362E)
        );
        factory.createVault(
            IUniswapV3Pool(0xF1B63cD9d80f922514c04b0fD0a30373316dd75b),
            ISilo(0x8E35ec3f2C8e14bf7A0E67eA6667F6965938aD2d),
            ISilo(0x908f6DF3df3c25365172F350670d055541Ec362E)
        );
    }
}
